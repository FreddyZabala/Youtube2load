(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{851:function(e,t,r){Promise.resolve().then(r.bind(r,7400))},7400:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Y}});var l=r(7437),a=r(4440),n=r.n(a),s=r(2265);let i=e=>{let{tabs:t}=e,[r,a]=(0,s.useState)(0);return(0,l.jsxs)("div",{children:[(0,l.jsx)("ul",{className:"flex flex-wrap text-sm font-medium text-center text-gray-500 border-b border-gray-200",children:t.map((e,t)=>{let{headerContent:s}=e;return(0,l.jsx)("li",{className:"mr-2",children:(0,l.jsx)("a",{href:"#","aria-current":"page",className:n()("inline-block p-4 rounded-t-lg",{"text-blue-600 bg-gray-100 active":r===t,"hover:text-gray-600 hover:bg-gray-50":r!==t}),onClick:()=>a(t),children:s})},t)})}),(0,l.jsx)("ul",{className:"p-4 font-light",children:t.map((e,t)=>{let{bodyContent:a}=e;return r===t&&(0,l.jsx)("li",{children:a},t)})})]})},o=e=>{let{value:t,onChange:r,children:a}=e;return(0,l.jsx)("select",{value:t,onChange:r,id:"countries",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg outline-0 block w-full p-2.5",children:a})};o.Option=e=>{let{children:t,value:r}=e;return(0,l.jsx)("option",{value:r,children:t})};let c="http://localhost:3001",d={AUDIO_QUALITY_LOW:"Quality Low",AUDIO_QUALITY_MEDIUM:"Quality Medium"},u={mp3:"mp3",mp4:"mp4",mp4WithoutAudio:"mp4"};var x=r(1872),h=r(4660);let m=(0,h.Ue)(e=>({userId:(0,x.Z)(),metaInfo:{src:"https://blog.rincondelvago.com/wp-content/themes/publisher/images/default-thumb/publisher-lg.png",alt:"Youtube Cover",videoTitle:"Here will be your video title",videoDuration:"Here will be your video duration",url:""},setMetaInfo:t=>e(e=>({...e,metaInfo:t})),setSocket:t=>e(e=>({...e,socket:t}))})),p=e=>{let t=new RegExp(/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi);return e.match(t)},f=async e=>{try{let t=await fetch("".concat(c,"/api/youtube-search?").concat(new URLSearchParams({url:e}))),r=await t.json();return r}catch(e){throw Error("Error: ",e.message)}},b=async(e,t,r)=>{try{let l="".concat(c,"/api/youtube-download?").concat(new URLSearchParams(JSON.parse(JSON.stringify(e)))),a=await fetch(l,{method:"POST",headers:{userId:t,operationId:r}}),n=await a.blob();return n}catch(e){throw Error("Error: ",e.message)}},j=()=>{let e=m(e=>e.metaInfo),t=m(e=>e.setMetaInfo),r=async r=>{var l;r.preventDefault();let a=new FormData(r.target),n=null===(l=a.get("search_input"))||void 0===l?void 0:l.toString(),s=e.url===n;if(s||!n)return;let i=p(n);if(i)try{let e=await f(n);t(e)}catch(e){console.error("Search API error: ",e)}};return{metaInfo:e,handleSearch:r}},g=(e,t)=>{var r;let l=window.URL.createObjectURL(e),a=document.createElement("a");a.href=l,a.setAttribute("download","downloaded.".concat(t)),document.body.appendChild(a),a.click(),null==a||null===(r=a.parentNode)||void 0===r||r.removeChild(a),window.URL.revokeObjectURL(l)},y=()=>{let e=async(e,t,r)=>{try{let l=await b(e,t,r),a=new Blob([l]),n=u[e.extension];g(a,n)}catch(e){console.error("Donwload API error: ",e)}};return{handleDownload:e}},A=e=>{let{operationId:t}=e,r=m(e=>e.socket),[l,a]=(0,s.useState)(!1),[n,i]=(0,s.useState)(0);return(0,s.useEffect)(()=>{r&&r.on("uploadProgress",e=>{if((null==e?void 0:e.operationId)!==t)return;let r=e.status,l=e.progressInfo;if("start"===r){a(!0);return}if("progress"===r){(null==l?void 0:l.percent)&&i(null==l?void 0:l.percent);return}if(["end","error"].includes(r)){a(!1),i(0);return}})},[r,t]),{isStartProgress:l,progress:n}};var v=r(3388);let w=()=>{let e=m(e=>e.userId),t=m(e=>e.setSocket);(0,s.useEffect)(()=>{let r=(0,v.io)(c);r.emit("connectInit",e),t(r)},[])},N=async e=>{let{baseVideoId:t,listId:r}=e;try{let e=await fetch("".concat(c,"/api/youtube-mix-playlist?").concat(new URLSearchParams({baseVideoId:t,listId:r}))),l=await e.json();return null==l?void 0:l.playListVideos}catch(e){throw Error("Error: ",e.message)}},_=()=>{let[e,t]=(0,s.useState)([]),r=e=>{if(!e)throw Error("Playlist search should be filled");let t=new URLSearchParams(e),r=t.get("v"),l=t.get("list"),a=t.get("index");if(console.log("test",r,l,a),!l||!r)throw Error("Invalid parameters");return{baseVideoId:r,listId:l}},l=async e=>{var l;e.preventDefault();let a=new FormData(e.target),n=null===(l=a.get("search_pl_input"))||void 0===l?void 0:l.toString();try{let e=r(n),l=await N(e);t(l)}catch(e){console.error(e)}};return{playlistVideosInfo:e,handleMixPlaylist:e=>{e.preventDefault();let t=new FormData(e.target),r=t.entries();try{console.log("test",r)}catch(e){}},handleGetPlaylistById:l}},S=e=>{let{children:t,onClick:r,type:a="button"}=e;return(0,l.jsx)("button",{type:a,onClick:r,className:"bg-blue-500 text-white py-2 px-4 text-sm rounded-full",children:t})},k=e=>{let{percent:t}=e;return(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(null!=t?t:0,"%")}})})},D=e=>{let{operationId:t,onDownload:r}=e,{progress:a,isStartProgress:n}=A({operationId:t});return(0,l.jsx)(s.Fragment,{children:n?(0,l.jsx)("div",{children:(0,l.jsx)(k,{percent:a})}):(0,l.jsx)(S,{onClick:r,children:"Download"})})},C=e=>{var t;let{extension:r}=e,a=m(e=>e.userId),{url:n,formatsGrouped:i}=m(e=>e.metaInfo),{handleDownload:o}=y(),c=(0,s.useMemo)(()=>null!==(t=null==i?void 0:i[r])&&void 0!==t?t:[],[r]),u=e=>({mp3:e.audioQuality?d[e.audioQuality]:"",mp4:e.videoQuality,mp4WithoutAudio:e.videoQuality});return(0,l.jsx)("div",{className:"flex flex-col gap-5",children:(0,l.jsxs)("table",{className:"max-w-[700px] table-auto border-separate border-spacing-x-10 border-spacing-y-2",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"table w-full table-fixed",children:[(0,l.jsx)("th",{className:"font-bold text-lg text-center text-blue-500",children:"Quality"}),(0,l.jsx)("th",{className:"font-bold text-lg text-center text-blue-500",children:"Size"}),(0,l.jsx)("th",{className:"font-bold text-lg text-center text-blue-500",children:"Status"})]})}),(0,l.jsx)("tbody",{className:"block max-h-[220px] overflow-y-scroll",children:c.map((e,t)=>(0,l.jsxs)("tr",{className:"table w-full table-fixed",children:[(0,l.jsx)("td",{children:u(e)[r]}),(0,l.jsx)("td",{children:[e.size,"MB"].join(" ")}),(0,l.jsx)("td",{children:(0,l.jsx)(D,{operationId:e.operationId,onDownload:()=>o({ytUrl:n,extension:r,itag:e.itag},a,e.operationId)})})]},t))})]})})},I=()=>{let[e,t]=(0,s.useState)("mp4");return(0,l.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"extensions",className:"block mb-2 text-sm font-medium",children:"Extension:"}),(0,l.jsxs)(o,{value:e,onChange:e=>t(e.target.value),children:[(0,l.jsx)(o.Option,{value:"mp4",children:"MP4"}),(0,l.jsx)(o.Option,{value:"mp3",children:"MP3"}),(0,l.jsx)(o.Option,{value:"mp4WithoutAudio",children:"MP4 Without Audio"})]})]}),(0,l.jsx)(C,{extension:e})]})};var E=r(6691),P=r.n(E),U={src:"/_next/static/media/empty.3e05e751.webp",height:450,width:571,blurDataURL:"data:image/webp;base64,UklGRqIAAABXRUJQVlA4WAoAAAAQAAAABwAABQAAQUxQSDEAAAAAAAAAAAAAAQAAD7bNxdJDAABk/////5gBAFP/////fAAFfczIx9JMAAEHAAAAAAMAAFZQOCBKAAAA8AEAnQEqCAAGAAJAOCWMAnQBDvU4jrYAAP74Nf1qI7eT31DpBfPXMPpLjAGZd9RuffO/Ygj/pn53zIC9YaKUd76O0JipyEGS6gA=",blurWidth:8,blurHeight:6};let M=()=>(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("h3",{className:"text-md text-gray-500",children:"You need to insert the youtube url to start playing with our manager! \uD83D\uDE00"}),(0,l.jsx)("div",{children:(0,l.jsx)(P(),{alt:"empty asset",src:U,width:280,height:280})})]}),O=e=>{let{children:t,htmlFor:r,labelText:a}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:r,className:"block mb-2 text-sm font-medium text-gray-900",children:a}),t]})},Q=e=>{let{name:t,id:r,placeholder:a,value:n,onChange:s}=e;return(0,l.jsx)("input",{type:"text",name:t,value:n,onChange:s,className:"border outline-0 text-gray border-gray-300 text-gray-500 text-sm rounded-lg block w-full p-2.5",placeholder:a,id:r,required:!0})},L=e=>{let{src:t,alt:r,videoTitle:a,videoDuration:n}=e;return(0,l.jsxs)("figure",{className:"flex flex-col gap-3 items-center",children:[(0,l.jsx)(P(),{src:t,alt:r,width:300,height:150}),(0,l.jsxs)("figcaption",{className:"text-center",children:["\uD83C\uDFA5 Title: ",a]}),(0,l.jsxs)("figcaption",{className:"text-center",children:["\uD83C\uDFAC Duration: ",n]})]})},F=e=>{let{name:t,value:r,id:a}=e;return(0,l.jsx)("input",{type:"checkbox",name:t,value:r,id:a,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})},R=e=>{let{playListVideos:t}=e;return(0,l.jsx)("div",{children:null==t?void 0:t.map(e=>{let{url:t,bestThumbnail:r,title:a,duration:n}=e;return(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)(O,{htmlFor:"".concat(t,"__checkbox"),labelText:(0,l.jsx)(L,{src:r,videoTitle:a,videoDuration:n,alt:a}),children:(0,l.jsx)(F,{id:"".concat(t,"__checkbox"),name:"".concat(t,"__checkbox")})})},t)})})},B=()=>{let{playlistVideosInfo:e,handleMixPlaylist:t,handleGetPlaylistById:r}=_();return(0,l.jsxs)("div",{className:"flex flex-col gap-7",children:[(0,l.jsxs)("form",{onSubmit:e=>r(e),children:[(0,l.jsx)(O,{htmlFor:"search_pl_input",labelText:(0,l.jsx)("span",{className:"text-md",children:"Playlist Mixer"}),children:(0,l.jsx)("div",{className:"flex gap-5",children:(0,l.jsx)(Q,{name:"search_pl_input",id:"search_pl_input",placeholder:"Search your playlist video..."})})}),(0,l.jsx)(S,{type:"submit",children:"Search"})]}),(0,l.jsxs)("form",{onSubmit:e=>t(e),children:[(0,l.jsx)(R,{playListVideos:e}),(0,l.jsx)(S,{type:"submit",children:"Mix"})]})]})},T=()=>{let e=m(e=>e.metaInfo);return(0,l.jsx)("div",{className:"w-fit mx-auto flex flex-col gap-5 mt-10",children:e.url?(0,l.jsx)(i,{tabs:[{headerContent:(0,l.jsx)("h3",{className:"text-md",children:"Download Now"}),bodyContent:(0,l.jsx)(I,{})},{headerContent:(0,l.jsx)("h3",{className:"text-md",children:"Mix Playlist"}),bodyContent:(0,l.jsx)(B,{})},{headerContent:(0,l.jsx)("h3",{className:"text-md",children:"Create Summary"}),bodyContent:(0,l.jsx)(I,{})},{headerContent:(0,l.jsx)("h3",{className:"text-md",children:"Create Reel"}),bodyContent:(0,l.jsx)(I,{})}]}):(0,l.jsx)(M,{})})},W=()=>{let{metaInfo:e,handleSearch:t}=j();return(0,l.jsxs)("div",{className:"max-w-md mx-auto p-5 flex flex-col gap-5 justify-center",children:[(0,l.jsx)("form",{onSubmit:e=>t(e),children:(0,l.jsx)(O,{htmlFor:"search_input",labelText:(0,l.jsx)("span",{className:"text-md",children:"Youtube Search"}),children:(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)(Q,{name:"search_input",id:"search_input",placeholder:"Search your video..."}),(0,l.jsx)(S,{type:"submit",children:"Search"})]})})}),(0,l.jsx)("div",{children:(0,l.jsx)(L,{...e})})]})};function Y(){return w(),(0,l.jsxs)("main",{className:"w-full h-screen grid",children:[(0,l.jsx)("div",{className:"flex flex-col justify-center",children:(0,l.jsx)(W,{})}),(0,l.jsx)("div",{className:"flex flex-col justify-center w-full h-full bg-[#f8f8f8]",children:(0,l.jsx)(T,{})})]})}}},function(e){e.O(0,[451,971,596,744],function(){return e(e.s=851)}),_N_E=e.O()}]);